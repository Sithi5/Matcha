{% extends 'profil/layout.html.twig' %}

{% block body %}
    {{ parent() }}

    <header class="profil-head" id="index-masthead">
        <img class="profil-background-cover-photo"  src="{{ asset(profilUserCoverPictureUrl) }}">

        <div class="container-fluid">
            <div class="row">
                <div class="col col-profil-profil">
                    <img id="modal-image-image" class="profil-profil-picture" src="{{ asset(profilUserProfilPictureUrl) }}">
                    {{ include('modals/modal-image-profil.html.twig') }}
                </div>
                <div class="col col-profil-profil">
                    <p class="profil-profil-name">
                        {{ profilUser.name }}
                    </p>
                    <span>
                        Age {{ profilUser.age }}
                    </span>
                </div>
            </div>
        </div>

    </header>

	<!-- The Modal -->
	<div id="modal-image" class="modal modal-image" aria-hidden="true">
		<!-- Modal Content (The Image) -->
  		<img class="modal-image-content" id="image-modal-content">
	</div>
	<!-- Page Content -->
	<div class="container">

		<h1 class="font-weight-light text-center text-lg-left mt-4 mb-0">{{ profilUser.name }}'s Galery</h1>
		<hr class="mt-2 mb-5">

		<div class="row text-center text-lg-left lazy">
				{% for picture in pictures %}
	    			<div class="col-lg-3 col-md-4 col-6">
	    				<a href="#" class="d-block mb-4 h-100">
	    			        <img id="modal-image-image-{{ picture.id }}" class="lazy img-fluid img-thumbnail" src="{{ asset('images/loading.gif') }}" data-src="{{ asset(picture.url) }}" alt="{{ picture.name }}">
	    			    </a>

						<script>
                					    // Get the modal
        					var modal = document.getElementById("modal-image");

        					// Get the image and insert it inside the modal - use its "alt" text as a caption
        					var img = document.getElementById("modal-image-image-{{ picture.id  }}");
        					var modalImg = document.getElementById("image-modal-content");
        					img.onclick = function() {
        					    modal.style.display = "block";
        					    modalImg.src = this.src;
        					}
    					</script>
	    			</div>
				{% endfor %}
			</div>
		</div>

	</div>
	<!-- /.container -->
<script>
	lazyload();
	window.onscroll = function(ev){
		lazyload();
	};
	function lazyload(){
		var lazyImage = document.getElementsByClassName('lazy');
		for(var i=0; i < lazyImage.length; i++)
		{
			if (elementInViewport(lazyImage[i])){
				lazyImage[i].setAttribute('src', lazyImage[i].getAttribute('data-src'));
			}
		}
	}
	function elementInViewport(el){
		var rect =el.getBoundingClientRect();
		return (
			rect.top >= 0 &&
			rect.left >= 0 &&
			rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
			rect.right <= (window.innerWidth || document.documentElement.clientWidth)
		);
	}
</script>

<script>

            // Get the modal profil
        var modal = document.getElementById("modal-image-profil");

        // Get the image and insert it inside the modal - use its "alt" text as a caption
        var img = document.getElementById("modal-image-image");
        var modalImg = document.getElementById("profil-image");
        img.onclick = function() {
            modal.style.display = "block";
            modalImg.src = this.src;
        }

        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }


</script>

{% endblock %}
